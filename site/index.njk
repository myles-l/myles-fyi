---
layout: base.njk
---
<header id="index-header">
  <h1 id="index-site-title" class="site-title caption invisible"><a class="quiet" href="/">{{ meta.title }}</a></h1>
  <menu id="nav-filters">
    {% for filter in meta.nav %}<li id="filter-{{ filter | slugify }}" class="caption filter"><a class="quiet" href="javascript:toggleFilter('{{ filter | slugify }}');">{{ filter }}</a></li>{% endfor %}
  </menu>
</header>

<div id="filter-menu">
  <button id="filter-menu-button" class="shift invert">Filter</button>
  <menu id="filter-popover">
    <li id="filter-all" class="caption filter on"><a class="quiet" href="javascript:resetFilters();">All work</a></li>
    {% for filter in meta.nav %}<li id="filter-{{ filter | slugify }}" class="caption filter"><a class="quiet" href="javascript:toggleFilter('{{ filter | slugify }}');">{{ filter }}</a></li>{% endfor %}
  </menu>
</div>

<main id="index-content">
  <section id="info" class="paragraph">
    <p>Myles Larson is a designer and visual artist specialized in digital products. He is based in New York and currently working on <a href="https://signal.org">Signal Messenger</a>.<span id="show-more-info" class="caption indent-left no-wrap"><a class="quiet" href="javascript:toggleFilter('info');">More info</a></span></p>
    <div id="more-info" class="paragraph hidden">
      <p>Prior to Signal, Myles was adjunct faculty at <a href="https://artcenter.edu">ArtCenter College of Design</a> teaching Interaction Design, an independent designer with a variety clients, and at Facebook creating their first design system.</p>
      <p>For all inquiries<br>
        <a id="mail-link" class="tooltip-link" href="javascript:copyToClipboard('{{ meta.author.email }}');"><span class="tooltip">copy {{ meta.author.email }}</span><span class="text">{{ meta.author.email }}</span></a>
      </p>
      {% if meta.social %}
        <p>Elsewhere
          {% for social in meta.social %}
            <br><a href="{{ social.url }}">{{ social.name }}</a>
          {% endfor %}
        </p>
      {% endif %}
      <p>Site info
        {% if meta.updated %}<br>Updated {{ meta.updated }}{% endif %}
      </p>
      <p id="hide-more-info" class="caption"><a class="quiet" href="javascript:toggleFilter('info');">Less info</a></p>
    </div>
  </section>

  <section id="work" class="grid">
    {% for post in work %}
      <article id="{{ post.slug }}" class="post{% for tag in post.tags %} tag-{{ tag | slugify }}{% endfor %}{% if post.class %} {{ post.class }}{% endif %}">
        {% if post.media.length > 1 %}
          <div class="window series">
            {% for slide in post.media %}
              {% set path = "/work/" + post.slug + "/" + slide.file %}
              {% if loop.index > 1 %}
                {% set class = "invisible slide slide-" + loop.index + " " + slide.class %}
              {% else %}
                {% set class = "slide slide-" + loop.index + " " + slide.class %}
              {% endif %}
              {% pic path, slide.alt, class %}
            {% endfor %}
          </div>
        {% else %}
          <div class="window">
            {% set path = "/work/" + post.slug + "/" + post.media[0].file %}
            {% set class = "slide " + post.media[0].class %}
            {% pic path, post.media[0].alt, class %}
          </div>
        {% endif %}
        <div class="post-info">
          <div class="post-title">
            <h2 class="caption">{{ post.title }}</h2>
            {% if post.description %}<p class="caption">{{ post.description }}</p>{% endif %}
            {% if post.date %}<p class="caption">{{ post.date }}</p>{% endif %}
          </div>
          {% if post.media.length > 1 %}<p class="caption no-wrap"><span class="series-index">1</span> &sol; {{ post.media.length }}</p>{% endif %}
        </div>
        {% if post.media.length > 1 %}
          <script>
            series("#{{ post.slug }}");
          </script>
        {% endif %}
      </article>
    {% endfor %}
  </section>
</main>

<script>
  window.onload = (event) => {
    let params = getURLFilter();
    if (params) {
      toggleFilter(params);
    }
  };

  window.addEventListener('popstate', () => {
    let params = getURLFilter();
    if (params) {
      toggleFilter(params);
    }
  });

  document.querySelector("#filter-menu-button").addEventListener("click", () => {
    filterMenuButton();
  });
</script>